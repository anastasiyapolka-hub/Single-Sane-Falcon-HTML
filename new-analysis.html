<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Work area</title>
    <link rel="icon" type="image/png" href="images/cotel-cat.png">
    <meta property="og:title" content="New-Analysis - Single Sane Falcon" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta property="twitter:card" content="summary_large_image" />

    <style data-tag="reset-style-sheet">
      html {  line-height: 1.15;}body {  margin: 0;}* {  box-sizing: border-box;  border-width: 0;  border-style: solid;  -webkit-font-smoothing: antialiased;}p,li,ul,pre,div,h1,h2,h3,h4,h5,h6,figure,blockquote,figcaption {  margin: 0;  padding: 0;}button {  background-color: transparent;}button,input,optgroup,select,textarea {  font-family: inherit;  font-size: 100%;  line-height: 1.15;  margin: 0;}button,select {  text-transform: none;}button,[type="button"],[type="reset"],[type="submit"] {  -webkit-appearance: button;  color: inherit;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner {  border-style: none;  padding: 0;}button:-moz-focus,[type="button"]:-moz-focus,[type="reset"]:-moz-focus,[type="submit"]:-moz-focus {  outline: 1px dotted ButtonText;}a {  color: inherit;  text-decoration: inherit;}pre {  white-space: normal;}input {  padding: 2px 4px;}img {  display: block;}details {  display: block;  margin: 0;  padding: 0;}summary::-webkit-details-marker {  display: none;}[data-thq="accordion"] [data-thq="accordion-content"] {  max-height: 0;  overflow: hidden;  transition: max-height 0.3s ease-in-out;  padding: 0;}[data-thq="accordion"] details[data-thq="accordion-trigger"][open] + [data-thq="accordion-content"] {  max-height: 1000vh;}details[data-thq="accordion-trigger"][open] summary [data-thq="accordion-icon"] {  transform: rotate(180deg);}html { scroll-behavior: smooth  }
    </style>
    <style data-tag="default-style-sheet">
      html {
        font-family: "Noto Sans";
        font-size: 1rem;
      }

    
      body {
        font-weight: 400;
        font-style:normal;
        text-decoration: undefined;
        text-transform: undefined;
        letter-spacing: 0.01em;
        line-height: 1.6;
        color: var(--color-on-surface);
        background: var(--color-surface);

        fill: var(--color-on-surface);
      }
    </style>

      <style>
      /* –õ–µ–π–∞—É—Ç: —Å–ª–µ–≤–∞ —Å–∞–π–¥–±–∞—Ä, —Å–ø—Ä–∞–≤–∞ —Ä–∞–±–æ—á–∞—è –æ–±–ª–∞—Å—Ç—å */
      .dashboard-layout {
        display: flex;
        align-items:  flex-start;
      }

      /* –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ */
      .dashboard-sidebar {
        width: 300px;
        padding: 16px 20px;
        border-right: 1px solid rgba(0, 0, 0, 0.06);
        /* background: #f9fafb;*/
        background: #f3f4f6; /* –º—è–≥–∫–∏–π —Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π */
        font-size: 0.9rem;
      }

      .dashboard-sidebar h3 {
        font-size: 0.9rem;
        font-weight: 600;
        margin-bottom: 8px;
      }

      .sidebar-section {
        margin-bottom: 18px;
      }

      .sidebar-section details {
        border-radius: 8px;
        padding: 8px 10px;
        background: #ffffff;
        box-shadow: 0 1px 3px rgba(15, 23, 42, 0.04);
      }

      .sidebar-section summary {
        list-style: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-weight: 600;
      }

      .sidebar-section summary::-webkit-details-marker {
        display: none;
      }

      .sidebar-section-body {
        margin-top: 8px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .sidebar-radio-row {
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .sidebar-radio-row input[type="radio"] {
        margin: 0;
      }

        .tg-auth-block {
        margin: 6px 0 10px 22px;      /* —á—É—Ç—å —Å–¥–≤–∏–≥–∞–µ–º –≤–ø—Ä–∞–≤–æ + –Ω–∏–∂–Ω–∏–π –æ—Ç—Å—Ç—É–ø */
        padding: 12px 14px;
        border-radius: 12px;
        background: #fdfcf8;          /* –º–æ–ª–æ—á–Ω–æ-–±–µ–ª—ã–π */
        border: 1px solid #e5e7eb;    /* —Ç–æ–Ω–∫–∞—è —Å–µ—Ä–∞—è —Ä–∞–º–∫–∞ */
        box-shadow: 0 1px 3px rgba(15, 23, 42, 0.04);
      }

      .tg-field {
        display: flex;
        flex-direction: column;
        gap: 4px;
        margin-bottom: 10px;
        padding: 6px 8px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.7); /* –ª—ë–≥–∫–∞—è –ø–ª–∞—à–∫–∞ –ø–æ–¥ –ø–æ–ª—è–º–∏ */
      }


      .tg-input {
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid #d1d5db;
        font-size: 0.9rem;
      }

      .tg-button {
        margin-top: 4px;
        padding: 6px 14px;
        border-radius: 999px;
        border: 1px solid #d1d5db;
        background: #f3f4f6;
        cursor: pointer;
        font-size: 0.85rem;
      }

      .tg-button:hover {
        background: #e5e7eb;
      }

      .tg-status {
        font-size: 0.8rem;
        color: #6b7280;
        margin-top: 4px;
      }

      .dashboard-container {
        flex: 1;
      }

      @media (max-width: 900px) {
        .dashboard-layout {
          flex-direction: column;
        }

        .dashboard-sidebar {
          width: 100%;
          border-right: none;
          border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        }
      }
    </style>

    <link
      rel="stylesheet"
      href="https://unpkg.com/animate.css@4.1.1/animate.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=STIX+Two+Text:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/@teleporthq/teleport-custom-scripts/dist/style.css"
    />
  </head>
  <body>
    <link rel="stylesheet" href="./style.css" />
      <link href="./new-analysis.css" rel="stylesheet" />

      <div class="new-analysis-container1">
        <navigation-wrapper class="navigation-wrapper">
          <!--Navigation component-->
          <div class="navigation-container1">
            <div class="navigation-container2">
              <div class="navigation-container3">
                <style>
                  @media (prefers-reduced-motion: reduce) {
                  .navigation__link::after, .navigation__logo::before, .navigation__overlay-link::before {
                    transition: none;
                  }
                  .navigation__overlay-link {
                    animation: none;
                  }
                  .navigation__logo:hover .navigation__logo-icon {
                    transform: none;
                  }
                  }
                </style>
              </div>
            </div>
            <nav id="mainNav" class="navigation">
              <div class="navigation__container">
                <div class="navigation__left">
                  <a href="#">
                    <div class="navigation__link">
                      <span>–ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑</span>
                    </div>
                  </a>
                  <a href="#">
                    <div class="navigation__link"><span>–ò—Å—Ç–æ—Ä–∏—è</span></div>
                  </a>
                </div>
                <a href="#">
                  <div class="navigation__logo">
                   
                    <span class="section-title navigation__logo-text">
  CO
  <img
    src="images/cotel-cat.png"
    alt="CoTel logo"
    class="navigation-logo-cat"
  />
  TEL
</span>
                  </div>
                </a>
                <div class="navigation__right">
                  <a href="#">
                    <div class="navigation__link"><span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></div>
                  </a>
                  <a href="#">
                    <div class="navigation__link navigation__link--cta">
                      <span>–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å</span>
                    </div>
                  </a>
                </div>
                <button
                  id="navToggle"
                  aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é"
                  aria-expanded="false"
                  class="navigation__toggle"
                >
                  <svg
                    width="24"
                    xmlns="http://www.w3.org/2000/svg"
                    height="24"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M4 5h16M4 12h16M4 19h16"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></path>
                  </svg>
                </button>
              </div>
            </nav>
            <div id="navOverlay" class="navigation__overlay">
              <div class="navigation__overlay-header">
                <a href="#">
                  <div class="navigation__overlay-logo">
                    
                    <span class="section-title">COTEL</span>
                  </div>
                </a>
                <button
                  id="navClose"
                  aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é"
                  class="navigation__overlay-close"
                >
                  <svg
                    width="28"
                    xmlns="http://www.w3.org/2000/svg"
                    height="28"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="m18 6l-12 12M6 6l12 12"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></path>
                  </svg>
                </button>
              </div>
              <div class="navigation__overlay-content">
                <a href="#">
                  <div class="navigation__overlay-link">
                    <span>–ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑</span>
                  </div>
                </a>
                <a href="#">
                  <div class="navigation__overlay-link">
                    <span>–ò—Å—Ç–æ—Ä–∏—è</span>
                  </div>
                </a>
                <a href="#">
                  <div class="navigation__overlay-link">
                    <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                  </div>
                </a>
                <a href="#">
                  <div
                    class="navigation__overlay-link--cta navigation__overlay-link"
                  >
                    <span>–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å</span>
                  </div>
                </a>
              </div>
            </div>
            <div class="navigation-container4">
              <div class="navigation-container5">
                <style>
                          @keyframes slideIn {from {opacity: 0;
                  transform: translateY(-20px);}
                  to {opacity: 1;
                  transform: translateY(0);}}
                </style>
              </div>
            </div>
          
          </div>
        </navigation-wrapper>
        
        <div class="dashboard-main">

          <div class="dashboard-layout">
            <!-- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê: –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö + –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è --> 
           <aside class="dashboard-sidebar">

            <div class="sidebar-header">
              <button
                id="sidebarToggle"
                class="sidebar-toggle-btn"
                type="button"
                title="–°–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å"
              >
              ‚öôÔ∏è
              </button>
              <span class="sidebar-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </div>

            <!-- –ú–∏–Ω–∏-–∏–∫–æ–Ω–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Å–≤–µ—Ä–Ω—É—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ -->
            <div class="sidebar-mini-icons">
              <button
                class="sidebar-mini-icon-btn"
                type="button"
                data-target="dataSourceSection"
                title="–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö"
              >
                üìÅ
              </button>
              <button
                class="sidebar-mini-icon-btn"
                type="button"
                data-target="myChatsSection"
                title="–ú–æ–∏ —á–∞—Ç—ã"
              >
                üí¨
              </button>
              <button
                class="sidebar-mini-icon-btn"
                type="button"
                data-target="mySubscriptionsSection"
                title="–ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏"
              >
                ‚≠ê
              </button>
            </div>

             
             <!-- –í–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø–∞–Ω–µ–ª–∏ -->
              <div id="sidebarContent">
                <!-- 1. –ò–°–¢–û–ß–ù–ò–ö –î–ê–ù–ù–´–• -->
              <div class="sidebar-section">
                <details id="dataSourceSection" open>
                  <summary>
                    <span>–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö</span>
                    <span>‚ñæ</span>
                  </summary>

                  <div class="sidebar-section-body">
                    <!-- 1. –§–∞–π–ª -->
                    <label class="sidebar-radio-row">
                      <input
                        type="radio"
                        name="dataSource"
                        id="dataSourceFile"
                        value="file"
                        checked
                      />
                      <span>–§–∞–π–ª Telegram (JSON)</span>
                    </label>

                    <!-- 2. –ú–æ–π –∞–∫–∫–∞—É–Ω—Ç Telegram -->
                    <label class="sidebar-radio-row">
                      <input
                        type="radio"
                        name="dataSource"
                        id="dataSourceAccount"
                        value="account"
                      />
                      <span>–ú–æ–π –∞–∫–∫–∞—É–Ω—Ç Telegram</span>
                    </label>

                    <!-- –ë–ª–æ–∫: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Telegram (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥ "–ú–æ–π –∞–∫–∫–∞—É–Ω—Ç") -->
                    <div
                      id="tgAuthBlock"
                      class="tg-auth-block"
                      style="display: none;"
                    >
                      <h3>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Telegram</h3>

                      <!-- —Å–æ—Å—Ç–æ—è–Ω–∏–µ 1: –≤–≤–æ–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
                      <div id="tgStatePhone">
                        <div class="tg-field">
                          <label for="tgPhoneInput">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                          <input
                            id="tgPhoneInput"
                            type="text"
                            class="tg-input"
                            placeholder="+7 9–•–• –•–•–•-–•–•-–•–•"
                          />
                        </div>
                        <button
                          id="tgSendCodeBtn"
                          type="button"
                          class="tg-button"
                        >
                          –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –≤ Telegram
                        </button>
                        <p class="tg-status">
                          –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–º –∫–æ–¥ –≤ –≤–∞—à Telegram-–∫–ª–∏–µ–Ω—Ç. –ú—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
                          –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π.
                        </p>
                      </div>

                      <!-- —Å–æ—Å—Ç–æ—è–Ω–∏–µ 2: –≤–≤–æ–¥ –∫–æ–¥–∞ -->
                      <div id="tgStateCode" style="display: none;">
                        <p class="tg-status">
                          –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–¥ –≤ –≤–∞—à Telegram. –í–≤–µ–¥–∏—Ç–µ –µ–≥–æ –Ω–∏–∂–µ.
                        </p>
                        <div class="tg-field">
                          <label for="tgCodeInput">–ö–æ–¥ –∏–∑ Telegram</label>
                          <input
                            id="tgCodeInput"
                            type="text"
                            class="tg-input"
                            placeholder="12345"
                          />
                        </div>
                        <button
                          id="tgConfirmCodeBtn"
                          type="button"
                          class="tg-button"
                        >
                          –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∫–æ–¥
                        </button>
                        <button
                          id="tgCancelCodeBtn"
                          type="button"
                          class="tg-button"
                          style="margin-left: 4px;"
                        >
                          –û—Ç–º–µ–Ω–∏—Ç—å
                        </button>
                      </div>

                      <!-- —Å–æ—Å—Ç–æ—è–Ω–∏–µ 2.5: —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å Telegram (2FA) -->
                      <div id="tgStatePassword" style="display: none;">
                        <p class="tg-status">
                          –î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Ö–æ–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å Telegram (2FA).
                        </p>
                      
                        <div class="tg-field">
                          <label for="tgPasswordInput">–ü–∞—Ä–æ–ª—å Telegram</label>
                          <input
                            id="tgPasswordInput"
                            type="password"
                            class="tg-input"
                            placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                          />
                        </div>
                      
                        <button
                          id="tgConfirmPasswordBtn"
                          type="button"
                          class="tg-button"
                        >
                          –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–∞—Ä–æ–ª—å
                        </button>
                      </div>

                      <!-- —Å–æ—Å—Ç–æ—è–Ω–∏–µ 3: –ø–æ–¥–∫–ª—é—á–µ–Ω–æ -->
                      <div id="tgStateConnected" style="display: none;">
                        <p class="tg-status">
                          –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ Telegram –∫–∞–∫
                          <strong id="tgConnectedUser">@username</strong>.
                        </p>
                        <p class="tg-status">
                          –í —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö —á–∞—Ç–æ–≤ –¥–ª—è
                          –∞–Ω–∞–ª–∏–∑–∞.
                        </p>
                      </div>

                      <p id="tgStatusMessage" class="tg-status"></p>
                    </div>

                    <!-- 3. –ü—É–±–ª–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª -->
                    <label class="sidebar-radio-row">
                      <input
                        type="radio"
                        name="dataSource"
                        id="dataSourcePublic"
                        value="public"
                      />
                      <span>–ü—É–±–ª–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª (–±–µ–∑ –ª–æ–≥–∏–Ω–∞)</span>
                    </label>

                    <!-- 4. –ß–∞—Ç —Å –±–æ—Ç–æ–º -->
                    <label class="sidebar-radio-row">
                      <input
                        type="radio"
                        name="dataSource"
                        id="dataSourceBot"
                        value="bot"
                      />
                      <span>–ß–∞—Ç —Å –±–æ—Ç–æ–º</span>
                    </label>
                  </div>
                </details>
              </div>

              <!-- 1.5 –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø TELEGRAM (–°–¢–ê–¢–£–°) -->
              <div class="sidebar-section" id="telegramStatusSection" style="display:none;">
                <details open>
                  <summary>
                    <span>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Telegram</span>
                    <span>‚ñæ</span>
                  </summary>
              
                  <div class="sidebar-section-body">
                    <div class="tg-status-row">
                      <span id="tgStatusDot" class="tg-status-dot tg-status-off"></span>
                      <span id="tgStatusText">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ</span>
                    </div>
              
                    <p class="sidebar-hint">
                      –ê–∫–∫–∞—É–Ω—Ç:
                      <strong id="tgStatusUsername">‚Äî</strong>
                    </p>
                  </div>
                </details>
              </div>

  
               <!-- 2. –ú–û–ò –ß–ê–¢–´ -->
              <div class="sidebar-section">
                <details id="myChatsSection" open>
                  <summary>
                    <span>–ú–æ–∏ —á–∞—Ç—ã</span>
                    <span>‚ñæ</span>
                  </summary>
          
                  <div class="sidebar-section-body">
                    <label class="sidebar-field-label" for="activeChatInput">
                      –ê–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç
                    </label>
                    <input
                      id="activeChatInput"
                      type="text"
                      class="sidebar-text-input"
                      placeholder="https://t.me/..."
                    />
                    <p class="sidebar-hint">
                      –í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —á–∞—Ç / –∫–∞–Ω–∞–ª / –≥—Ä—É–ø–ø—É.
                    </p>
                  </div>
                </details>
              </div>
          
              <!-- 3. –ú–û–ò –ü–û–î–ü–ò–°–ö–ò -->
              <div class="sidebar-section">
                <details id="mySubscriptionsSection" open>
                  <summary>
                    <span>–ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏</span>
                    <span>‚ñæ</span>
                  </summary>
          
                  <div class="sidebar-section-body sidebar-subscriptions-body">
                    <button
                      type="button"
                      class="sidebar-add-subscription-btn"
                      title="–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É"
                    >
                      +
                    </button>
                    <p class="sidebar-hint sidebar-subscriptions-hint">
                      –ó–¥–µ—Å—å –≤—ã –ø–æ–∑–∂–µ —Å–º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã.
                    </p>
                  </div>
                </details>
              </div>
                
            </div>
            </aside>

           <div class="dashboard-container">
              <div class="dashboard-top-block">

              <!-- –ü–æ–ª–æ—Å–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —á–∞—Ç–∞ -->
              <div id="chatTitleBar" class="chat-title-bar" style="display:none;">
                  <span id="chatTitleText"></span>
              </div>
              <div class="dashboard-results-viewer">
                
                <div class="dashboard-loader">
                  <div class="dashboard-loader-cat">
                    <div class="dashboard-cat-body">
                      <div
                        class="dashboard-cat-ear dashboard-cat-ear-left"
                      ></div>
                      <div
                        class="dashboard-cat-ear dashboard-cat-ear-right"
                      ></div>
                      <div class="dashboard-cat-face">
                        <div
                          class="dashboard-cat-eye dashboard-cat-eye-left"
                        ></div>
                        <div
                          class="dashboard-cat-eye dashboard-cat-eye-right"
                        ></div>
                        <div class="dashboard-cat-nose"></div>
                      </div>
                    </div>
                    <div class="dashboard-cat-tail"></div>
                  </div>
                  <p class="dashboard-loader-text section-content">
                    –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ...
                  </p>
                </div>
                 <pre id="analysisResult" class="dashboard-results-text"></pre>
              </div>
            </div>
            <div class="dashboard-bottom-block">
              <div class="dashboard-input-panel">
                <div class="analysis-controls">
                  <!-- –ö–Ω–æ–ø–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ —á–∞—Ç–∞ -->
                  <button
                    id="uploadBtn"
                    class="analysis-icon-button"
                    type="button"
                    title="–ò–º–ø–æ—Ä—Ç —á–∞—Ç–∞"
                  >
                    <!-- reuse SVG –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ —Å—Ç–∞—Ä–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏ -->
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M12 3v12m5-7l-5-5l-5 5m14 7v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </button>

                  <!-- –°–∫—Ä—ã—Ç—ã–π input —Ñ–∞–π–ª–∞ -->
                  <input type="file" id="chatFile" accept=".json" style="display:none" />
            
                  <!-- –û–≤–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ -->
                  <input
                    id="queryInput"
                    type="text"
                    class="analysis-query-input"
                    placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞"
                  />
            
                  <!-- –ö–Ω–æ–ø–∫–∞ play -->
                  <button
                    id="analyzeBtn"
                    class="analysis-icon-button analysis-play-button"
                    type="button"
                    title="–í—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑"
                  >
                    <svg
                      width="20"
                      height="20"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                  d="M8 5v14l11-7z"
                  fill="currentColor"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linejoin="round"
                />
                    </svg>
                  </button>
                </div>

                <!-- –ó–¥–µ—Å—å –º–∞–ª–µ–Ω—å–∫–∏–π –¥–∏—Å–∫–ª–µ–π–º–µ—Ä –ø–æ–¥ –ø–∞–Ω–µ–ª—å—é –≤–≤–æ–¥–∞ -->
                <p class="analysis-disclaimer">
                  ‚ö†Ô∏è –ê–Ω–∞–ª–∏–∑ —á–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –º–æ–¥–µ–ª—å—é –ò–ò (OpenAI).
                  –ù–µ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
                </p>
              </div>
            </div>
          </div>
        </div>
          
        <style>
          @keyframes dashboardFloat { 0%,100% {transform: translateY(0) rotate(0deg);} 50% {transform: translateY(-20px) rotate(5deg);} }
          @keyframes dashboardBlink { 0%,48%,52%,100% {height: 8px;} 50% {height: 2px;} }
          @keyframes dashboardTailWag { 0%,100% {transform: rotate(-45deg);} 50% {transform: rotate(-25deg);} }
          @keyframes dashboardPulse { 0%,100% {opacity: 1;} 50% {opacity: 0.5;} }
        </style>
      
        <script defer data-name="dashboard-interactions">
  document.addEventListener("DOMContentLoaded", function () {
    (function () {
      const BACKEND_URL = "https://cotel-backend.onrender.com/analyze";

      const uploadBtn = document.getElementById("uploadBtn");
      const fileInput = document.getElementById("chatFile");
      const queryInput = document.getElementById("queryInput");
      const analyzeBtn = document.getElementById("analyzeBtn");
      const loader = document.querySelector(".dashboard-loader");
      const resultDiv = document.getElementById("analysisResult");

            // --- –≠–õ–ï–ú–ï–ù–¢–´ –î–õ–Ø –í–´–ë–û–†–ê –ò–°–¢–û–ß–ù–ò–ö–ê –î–ê–ù–ù–´–• ---
      const dataSourceFileRadio = document.getElementById("dataSourceFile");
      const dataSourceAccountRadio = document.getElementById("dataSourceAccount");
      const dataSourcePublicRadio = document.getElementById("dataSourcePublic");
      const dataSourceBotRadio = document.getElementById("dataSourceBot");

      const tgAuthBlock = document.getElementById("tgAuthBlock");
      const tgStatePhone = document.getElementById("tgStatePhone");
      const tgStateCode = document.getElementById("tgStateCode");
      const tgStateConnected = document.getElementById("tgStateConnected");

      const tgStatePassword = document.getElementById("tgStatePassword");
      const tgPasswordInput = document.getElementById("tgPasswordInput");
      const tgConfirmPasswordBtn = document.getElementById("tgConfirmPasswordBtn");

      const tgPhoneInput = document.getElementById("tgPhoneInput");
      const tgSendCodeBtn = document.getElementById("tgSendCodeBtn");
      const tgCodeInput = document.getElementById("tgCodeInput");
      const tgConfirmCodeBtn = document.getElementById("tgConfirmCodeBtn");
      const tgCancelCodeBtn = document.getElementById("tgCancelCodeBtn");
      const tgStatusMessage = document.getElementById("tgStatusMessage");
      const tgConnectedUser = document.getElementById("tgConnectedUser");

      const telegramStatusSection = document.getElementById("telegramStatusSection");
      const tgStatusDot = document.getElementById("tgStatusDot");
      const tgStatusText = document.getElementById("tgStatusText");
      const tgStatusUsername = document.getElementById("tgStatusUsername");

      // —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º–æ–π –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏
      const sidebar = document.querySelector(".dashboard-sidebar");
      const sidebarToggle = document.getElementById("sidebarToggle");

            // ----------------------
      // –ú–ê–°–ö–ê –î–õ–Ø –¢–ï–õ–ï–§–û–ù–ê +7
      // ----------------------
      tgPhoneInput.addEventListener("input", function (e) {
        let value = tgPhoneInput.value.replace(/\D/g, ""); // —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
      
        // –ù–∞—á–∏–Ω–∞–µ–º –≤—Å–µ–≥–¥–∞ —Å "7"
        if (!value.startsWith("7")) {
          value = "7" + value;
        }
      
        // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –¥–æ 11 —Ü–∏—Ñ—Ä
        value = value.substring(0, 11);
      
        // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º
        let formatted = "+7";
      
        if (value.length > 1) formatted += " " + value.substring(1, 4);
        if (value.length > 4) formatted += " " + value.substring(4, 7);
        if (value.length > 7) formatted += " " + value.substring(7, 9);
        if (value.length > 9) formatted += " " + value.substring(9, 11);
      
        tgPhoneInput.value = formatted;
      });
      
      // –ù–µ –¥–∞—ë–º —É–¥–∞–ª–∏—Ç—å "+7"
      tgPhoneInput.addEventListener("keydown", (e) => {
        if (tgPhoneInput.selectionStart < 2 && (e.key === "Backspace" || e.key === "Delete")) {
          e.preventDefault();
        }
      });

      function updateDataSourceUI() {
        const checked = document.querySelector('input[name="dataSource"]:checked');
        const mode = checked ? checked.value : "file";

        // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º / —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
        if (uploadBtn) {
          uploadBtn.style.display = mode === "file" ? "inline-flex" : "none";
        }

        // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º / —Å–∫—Ä—ã–≤–∞–µ–º –±–ª–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Telegram
        if (tgAuthBlock) {
          tgAuthBlock.style.display = mode === "account" ? "block" : "none";
        }

        if (telegramStatusSection) {
          telegramStatusSection.style.display =
            dataSourceAccountRadio.checked ? "block" : "none";
        }

      }

      function setTgState(state) {
        tgStatePhone.style.display = state === "phone" ? "block" : "none";
        tgStateCode.style.display = state === "code" ? "block" : "none";
        tgStatePassword.style.display = state === "password" ? "block" : "none";
        tgStateConnected.style.display = state === "connected" ? "block" : "none";
      }

      function setTelegramConnectionStatus(isConnected, username = null) {
        if (!telegramStatusSection) return;
      
        telegramStatusSection.style.display = "block";
      
        if (isConnected) {
          tgStatusDot.classList.remove("tg-status-off");
          tgStatusDot.classList.add("tg-status-on");
          tgStatusText.textContent = "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ";
          tgStatusUsername.textContent = username || "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å";
        } else {
          tgStatusDot.classList.remove("tg-status-on");
          tgStatusDot.classList.add("tg-status-off");
          tgStatusText.textContent = "–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ";
          tgStatusUsername.textContent = "‚Äî";
        }
      }

      // –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
      setTgState("phone");

      function showLoader(show) {
        if (!loader) return;
        loader.style.display = show ? "flex" : "none";
      }

      // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä—è—á–µ–º –∫–æ—Ç–∏–∫–∞
      showLoader(false);

            // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±–Ω–æ–≤–ª—è–µ–º UI –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –∏—Å—Ç–æ—á–Ω–∏–∫—É
      updateDataSourceUI();

      // —Å–ª—É—à–∞–µ–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
      dataSourceFileRadio?.addEventListener("change", updateDataSourceUI);
      dataSourceAccountRadio?.addEventListener("change", updateDataSourceUI);
      dataSourcePublicRadio?.addEventListener("change", updateDataSourceUI);
      dataSourceBotRadio?.addEventListener("change", updateDataSourceUI);

      // --- –°–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ / —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ ---
      if (sidebar && sidebarToggle) {
        sidebarToggle.addEventListener("click", () => {
          const isCollapsed = sidebar.classList.toggle("collapsed");
          sidebarToggle.setAttribute(
            "title",
            isCollapsed ? "–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å" : "–°–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å"
          );
        });
      }

      // --- –ú–∏–Ω–∏-–∏–∫–æ–Ω–∫–∏ –≤ —Å–≤–µ—Ä–Ω—É—Ç–æ–π –ø–∞–Ω–µ–ª–∏ ---
      const miniIconButtons = document.querySelectorAll(".sidebar-mini-icon-btn");

      miniIconButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const targetId = btn.getAttribute("data-target");

          // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –ø–∞–Ω–µ–ª—å
          if (sidebar) {
            sidebar.classList.remove("collapsed");
          }
          if (sidebarToggle) {
            sidebarToggle.setAttribute("title", "–°–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å");
          }

          // –û—Ç–∫—Ä—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π –±–ª–æ–∫ <details>
          if (targetId) {
            const detailsEl = document.getElementById(targetId);
            if (detailsEl && detailsEl.tagName.toLowerCase() === "details") {
              detailsEl.open = true;
              detailsEl.scrollIntoView({
                behavior: "smooth",
                block: "nearest",
              });
            }
          }
        });
      });


      // --- –ü–û–í–ï–î–ï–ù–ò–ï –ë–õ–û–ö–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò TELEGRAM (–ø–æ–∫–∞ –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤) ---

      tgSendCodeBtn?.addEventListener("click", async () => {
      const phone = (tgPhoneInput?.value || "").trim();
      if (!phone) {
        tgStatusMessage.textContent = "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.";
        return;
      }
    
      tgStatusMessage.textContent = "–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–¥...";
    
      try {
        const resp = await fetch("https://cotel-backend.onrender.com/tg/send_code", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ phone })
        });
    
        const data = await resp.json();
    
        if (!resp.ok) {
          tgStatusMessage.textContent = "–û—à–∏–±–∫–∞: " + (data.detail || "–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥.");
          return;
        }
    
        tgStatusMessage.textContent = "–ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram.";
        setTgState("code");
    
      } catch (err) {
        tgStatusMessage.textContent = "–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + err.message;
      }
      });


      tgConfirmCodeBtn?.addEventListener("click", async () => {
      const phone = (tgPhoneInput?.value || "").trim();
      const code = (tgCodeInput?.value || "").trim();
    
      if (!code) {
        tgStatusMessage.textContent = "–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ Telegram.";
        return;
      }
    
      tgStatusMessage.textContent = "–ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥...";
    
      try {
        const resp = await fetch("https://cotel-backend.onrender.com/tg/confirm_code", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ phone, code })
        });
    
        const data = await resp.json();
    
       const detail = String(data.detail || "");

        if (!resp.ok) {
          if (detail.includes("SESSION_PASSWORD_NEEDED") || detail.includes("PASSWORD_NEEDED")) {
            tgStatusMessage.textContent = "–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å Telegram (2FA).";
            setTgState("password");
            return;
        }
      
        tgStatusMessage.textContent = "–û—à–∏–±–∫–∞: " + (data.detail || "–ö–æ–¥ –Ω–µ–≤–µ—Ä–µ–Ω.");
        return;
      }


    // —É—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    tgConnectedUser.textContent = data.username
      ? "@" + data.username
      : data.first_name || "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å";

    tgStatusMessage.textContent = "–£—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ.";

    setTgState("connected");
    setTelegramConnectionStatus(true, data.username || data.first_name);

  } catch (err) {
    tgStatusMessage.textContent = "–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + err.message;
  }
});

      tgConfirmPasswordBtn?.addEventListener("click", async () => {
        const phone = (tgPhoneInput?.value || "").trim();
        const password = (tgPasswordInput?.value || "").trim();
      
        if (!password) {
          tgStatusMessage.textContent = "–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å Telegram.";
          return;
        }
      
        tgStatusMessage.textContent = "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –ø–∞—Ä–æ–ª—å...";
      
        try {
          const resp = await fetch("https://cotel-backend.onrender.com/tg/confirm_password", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ phone, password })
          });
      
          const data = await resp.json();
      
          if (!resp.ok) {
            tgStatusMessage.textContent = "–û—à–∏–±–∫–∞: " + (data.detail || "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–∞—Ä–æ–ª—å.");
            return;
          }
      
          tgConnectedUser.textContent = data.username
            ? "@" + data.username
            : data.first_name || "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å";
      
          tgStatusMessage.textContent = "–£—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ.";
          setTgState("connected");
          setTelegramConnectionStatus(true, data.username || data.first_name);
      
        } catch (err) {
          tgStatusMessage.textContent = "–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + err.message;
        }
      });

      tgCancelCodeBtn?.addEventListener("click", () => {
        if (tgPhoneInput) tgPhoneInput.value = "";
        if (tgCodeInput) tgCodeInput.value = "";
        if (tgStatusMessage) tgStatusMessage.textContent = "";
        setTgState("phone");
      });

      // –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ —Å –∏–∫–æ–Ω–∫–æ–π ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞
      if (uploadBtn && fileInput) {
      uploadBtn.addEventListener("click", () => {
    // –≤–∞–∂–Ω–∞—è —Å—Ç—Ä–æ–∫–∞: —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ñ–∞–π–ª,
    // —á—Ç–æ–±—ã –¥–∞–∂–µ —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π —Ñ–∞–π–ª —Å—á–∏—Ç–∞–ª—Å—è "–∏–∑–º–µ–Ω–µ–Ω–∏–µ–º"
    fileInput.value = "";
    fileInput.click();
  });

  fileInput.addEventListener("change", () => {
    if (!fileInput.files[0]) return;
    if (resultDiv) {
      resultDiv.textContent = `–í—ã–±—Ä–∞–Ω —Ñ–∞–π–ª: ${fileInput.files[0].name}`;
    }
  
  });
}

      // –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ –∫–Ω–æ–ø–∫–µ Play
      if (analyzeBtn) {
        analyzeBtn.addEventListener("click", async () => {
          const file = fileInput?.files[0];

          if (!file) {
            alert("–°–Ω–∞—á–∞–ª–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —á–∞—Ç (–≤—ã–±–µ—Ä–∏—Ç–µ JSON-—Ñ–∞–π–ª —ç–∫—Å–ø–æ—Ä—Ç–∞)");
            return;
          }

          const query = (queryInput?.value || "").trim();

          const formData = new FormData();
          formData.append("file", file);

          const params = {
            query: query || null,
            result_type: "summary",
          };
          formData.append("params", JSON.stringify(params));

          showLoader(true);
          if (resultDiv) resultDiv.textContent = "";

          try {
            const resp = await fetch(BACKEND_URL, {
              method: "POST",
              body: formData,
            });
          
            // 1. —Å–Ω–∞—á–∞–ª–∞ —á–∏—Ç–∞–µ–º "—Å—ã—Ä–æ–µ" —Ç–µ–ª–æ
            const rawText = await resp.text();
            let data = null;
          
            // 2. –ø—Ä–æ–±—É–µ–º —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –∫–∞–∫ JSON, –µ—Å–ª–∏ —á—Ç–æ ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º
            if (rawText) {
              try {
                data = JSON.parse(rawText);
              } catch (e) {
                // –Ω–µ JSON ‚Äî –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ, –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–µ–∫—Å—Ç–æ–º
              }
            }

            // 3. –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –Ω–µ –æ–∫ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–∞–∫—Å–∏–º—É–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
            if (!resp.ok) {
              const detail =
                (data && (data.detail || data.error)) ||
                rawText ||
                resp.statusText ||
                "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞";
          
              if (resultDiv) {
                resultDiv.textContent =
                  "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (" + resp.status + "): " + detail;
              }
              return;
            }
          
            // 4. –µ—Å–ª–∏ –≤–æ–æ–±—â–µ –ø—É—Å—Ç–æ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ–¥—Å–≤–µ—Ç–∏–º
            if (!data && !rawText) {
              if (resultDiv) {
                resultDiv.textContent =
                  "–°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç (status " + resp.status + ").";
              }
              return;
            }

            // 5. –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
            const payload = data || {};
          
            let text = "";

            // 1) —Å–Ω–∞—á–∞–ª–∞ —Å–∞–º –æ—Ç–≤–µ—Ç LLM, –µ—Å–ª–∏ –µ—Å—Ç—å
            if (payload.summary) {
              text += payload.summary + "\n\n";
            }
            
            // 2) –∑–∞—Ç–µ–º —Å–ª—É–∂–µ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            if (payload.message) {
              text += payload.message;
            } else if (payload.status === "ok" && !payload.summary) {
              text += "–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω";
            }
          
            if (typeof payload.messages_count === "number") {
              text += ` (—Å–æ–æ–±—â–µ–Ω–∏–π: ${payload.messages_count})`;
            }
          
            if (payload.filename) {
              text += `\n–§–∞–π–ª: ${payload.filename}`;
            }
          
            // –ø–æ–∫–∞–∑–∞—Ç—å —Ç–∏–ø –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞ –≤ –≤–µ—Ä—Ö–Ω–µ–π –ø–æ–ª–æ—Å–∫–µ
            if (payload.chat_name || payload.chat_type) {
            const bar = document.getElementById("chatTitleBar");
            const title = document.getElementById("chatTitleText");
          
            const typeText = payload.chat_type ? payload.chat_type : "–ß–∞—Ç";
            const nameText = payload.chat_name ? payload.chat_name : "–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è";

            title.textContent = `${typeText}: ${nameText}`;
            bar.style.display = "block";
          }
            if (resultDiv) {
              resultDiv.textContent = text || rawText;
            }
        } catch (err) {
          if (resultDiv) {
            resultDiv.textContent = "–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: " + err.message;
          }
} finally {
  showLoader(false);
}

        });
      }
    })();
  });
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const header = document.getElementById("mainNav");
  if (!header) return;

  const HOTZONE_HEIGHT = 40;    // —Å–∫–æ–ª—å–∫–æ –ø–∏–∫—Å–µ–ª–µ–π –æ—Ç –≤–µ—Ä—Ö–∞ ‚Äî ¬´–≥–æ—Ä—è—á–∞—è –∑–æ–Ω–∞¬ª
  const HIDE_DELAY = 1500;      // —á–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –º—Å –ø—Ä—è—Ç–∞—Ç—å –ø–æ—Å–ª–µ –ø–æ–∫–∞–∑–∞

  let hideTimer = null;

  function hideHeader() {
    header.classList.add("nav-hidden");
  }

  function scheduleHide() {
    clearTimeout(hideTimer);
    hideTimer = setTimeout(hideHeader, HIDE_DELAY);
  }

  // —Å—Ç–∞—Ä—Ç: —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –ø–∞—É–∑—É —à–∞–ø–∫–∞ —É–µ–¥–µ—Ç
  scheduleHide();

  // –ü–æ–∫–∞–∑ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º—ã—à–∫–∞ —É —Å–∞–º–æ–≥–æ –≤–µ—Ä—Ö–∞ –æ–∫–Ω–∞
  document.addEventListener("mousemove", (e) => {
    // e.clientY ‚Äî –ø–æ–∑–∏—Ü–∏—è –∫—É—Ä—Å–æ—Ä–∞ –æ—Ç –≤–µ—Ä—Ö–∞ –æ–∫–Ω–∞
    if (e.clientY <= HOTZONE_HEIGHT) {
      header.classList.remove("nav-hidden");
      scheduleHide();  // –æ–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä —Å–∫—Ä—ã—Ç–∏—è
    }
    // –µ—Å–ª–∏ –º—ã—à–∫–∞ –Ω–∏–∂–µ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º, —à–∞–ø–∫–∞ —Å–∞–º–∞ —Å–∫—Ä–æ–µ—Ç—Å—è –ø–æ —Ç–∞–π–º–µ—Ä—É
  });

  // –ß—É—Ç—å-—á—É—Ç—å —É–ª—É—á—à–∏–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ:
  // –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Å–∫—Ä–æ–ª–ª–µ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä —Å–∫—Ä—ã—Ç–∏—è,
  // –Ω–æ —Å–∞–º —Ö–µ–¥–µ—Ä –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
  window.addEventListener("scroll", () => {
    scheduleHide();
  });
});
</script>



      <link
        rel="canonical"
        href="https://single-sane-falcon-xjmc7x.teleporthq.app/new-analysis"
      />
    </div>
  </body>
</html>
